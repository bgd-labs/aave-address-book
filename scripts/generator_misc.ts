import * as fs from 'fs';
import {
  generateMiscAddressesSol,
  generateMiscAddresses,
} from './helpers';
import {Misc} from './config';

export function writeMiscTemplates(miscAddresses: Misc): void {
  const templateGovV2Solidity = `// SPDX-License-Identifier: MIT
  // AUTOGENERATED - DON'T MANUALLY CHANGE
  pragma solidity >=0.6.0;

  import {IAaveEcosystemReserveController} from './common/IAaveEcosystemReserveController.sol';
  import {IStreamable} from './common/IStreamable.sol';

  library AaveMisc {
    ${generateMiscAddressesSol(miscAddresses)}
  }
  `;

  fs.writeFileSync(`./src/AaveMisc.sol`, templateGovV2Solidity);

  const templateGovV2Js = `// AUTOGENERATED - DON'T MANUALLY CHANGE
    ${generateMiscAddresses(miscAddresses)}`;

  fs.writeFileSync(`./src/ts/AaveMisc.ts`, templateGovV2Js);
  fs.appendFileSync(`./src/ts/AaveAddressBook.ts`, `export * as AaveMisc from './AaveMisc';\r\n`);
}
